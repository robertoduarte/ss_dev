*******************************************************************************
���h�L�������g���      �FSGL:PCM Playback Library Document
���t�@�C���L������      �FMANPCM.TXT
���Ώۃ��C�u�����L�����́Fpcm
���Ώۃ��C�u��������    �FPCM/ADPCM�Đ����C�u����
���o�[�W����            �F1.20
���쐬��                �FK.T
���쐬��                �F1996-06-11
�����̑��̃��b�Z�[�W    �F�Ȃ�
*******************************************************************************

�P�D�T�v
  �{���C�u�����́A�T�^�[���ł̂o�b�l�X�g���[���Đ����T�|�[�g���܂��B
�@�Đ����[�h�Ƃ��āA�������Đ����[�h�C�t�@�C���Đ����[�h�C�X�g���[���Đ����[�h
������A�������Đ����[�h�̎g�����Ƃ��ď풓�Đ��ƁA���������Đ�������܂��B
�@AIFF�`���CAudioStack ADPCM�`��(AudioStack�ɂ���ďo�͂����t�@�C���`��)�C
CD-ROM XA Audio ADPCM�`��(SEGA ADPCM Encoder�ŏo�͂ł���`��)�̃t�@�C�����Đ���
�邱�Ƃ��ł��܂��B
(SEGA���񋟂��Ă���SEGA ADPCM Encoder�ŏo�͂��ꂽADPCM�f�[�^�́AMODE2�Ƃ���
�����g�p���邱�Ƃ͂ł��܂���BAudioStack�ŏo�͂��ꂽ�f�[�^�́AMODE1�ł��g�p����
���Ƃ��\�ł��B)
�@�{���C�u�����́A�V�l�p�b�N���C�u�����̃I�[�f�B�I���������Ƃɍ쐬���Ă���̂�
�֐��C���^�t�F�[�X���g�p�@�́A�V�l�p�b�N���C�u�����ƂقƂ�Ǔ����ł����A���[�N
�o�b�t�@�A�|�[�Y�����p���[�N�o�b�t�@�̎����ȂǁA�኱�̈Ⴂ������܂��̂Œ���
���ĉ������B

�Q�D�񋟕���
�@�E�o�b�l�E�`�c�o�b�l�Đ����C�u����
�@�E�`�c�o�b�l�L�����C�u����
�@�E�T���v���v���O�����i�\�[�X�܂ށj�A�u�b�c�p�X�N���v�g(VCD V3.37�ȍ~�ɑΉ�)

�R�D�Ή��o�[�W����
    SGL CD���C�u����        �FVer2.10
�@    (�t�@�C���V�X�e��)�@�@�FVer2.11 �ȏ� 
�@    (�X�g���[���V�X�e��)�@�FVer2.11 �ȏ� 
  �@�T�E���h�h/�e���C�u���� �FVer1.05 �ȏ�
  �@�T�E���h�h���C�o�@�@�@�@�FVer2.04 �ȏ�
  �@ADPCM�L�����C�u���� �@�@�FVer1.01 �ȏ�
  �@�o�[�`�����b�c�֘A(�b�c����̍Đ����s���ꍇ�ɕK�v)
          VCDBUILD        �@�FVer3.72 �ȏ� 
          VCDEMU          �@�FVer1.72 �ȏ� 


�S�D���ӎ���
�S�D�P�@�e�o�b�t�@�̊m��
  �@�@���[�N�o�b�t�@�@�@�F���[�N�\���̂̃T�C�Y�B
  �@�@�����O�o�b�t�@�@�@�F�Œ� (�Z�N�^�T�C�Y)*10 [byte]�B
�@�@�@�o�b�l�o�b�t�@�@�@�F4096*2 �` 4096*4 [sample/1ch]�B
  �@�@�|�[�Y�����p���[�N�F�o�b�l�o�b�t�@�Ɠ��T�C�Y���œK�B�Œ� 4096 [sample]�B

�S�D�Q�@�r�b�t�|�c�l�` �g�p���̒���
�@�@�b�c�u���b�N���烊���O�o�b�t�@�ւ̃f�[�^�]�����r�b�t�̂c�l�`�ōs���ꍇ�A
�@�y���t�F������񂪐����������Ȃ��Ȃ邱�Ƃ�����܂��B
�@�@���̏ꍇ�A�ő�]���Z�N�^��(�f�t�H���g�l 20)���������ݒ肷�邱�Ƃŉ��P�ł�
�@�܂����A�������ݒ�������ꍇ�A����Ɍ������\���ȕp�x�Ń^�X�N�֐��i�X�g���[��
�@�Đ��̏ꍇ�� STM_ExecServer ���� STM_ExecTrans�j���R�[������K�v������܂��B
�@�@�m������n
�@�@�@�@PCM_SetTrModeCd(pcm, PCM_TRMODE_SCU);  /* SCU-DMA�œ]������         */
�@�@�@�@PCM_SetLoadNum(pcm, 5);                /* 1��̓]���ʂ̍ő�l [���] */
�@�@�܂��A�r�b�t�|�c�l�`�œ]�����́A�g�p����o�X����L�����̂ŁA�r�g�͂b�o�t
�@�o�X���A�N�Z�X���悤�Ƃ����Ƃ�����E�G�C�g��ԂɂȂ��Ă��܂��܂��B
�@�@�r�b�t�|�c�l�`�́A�ɗ͎g�p���Ȃ��ŉ������B

�S�D�Q�@���̑��̒���
  �E�{���C�u�����͂b�o�t�̃^�C�}���g�p���܂��B���C�u�������쎞�͂b�o�t�̃^�C�}
  �@���g�p���Ȃ��ŉ������B

  �EPCM_Init �֐��́A�v���O�����̐擪�ŕK���R�[�����Ă��������B

  �EPCM_VblIn �֐��́A�u�u�����N�h�m���荞�݂Ŗ���K���R�[�����Ă��������B

  �EPCM_Task �֐��́A���Ȃ��Ƃ��u�u�����N���荞�݂̕p�x�i�P��/�P�U�����j�Ɠ���
  �@�ȏ�̕p�x�ŁA����I�ɃR�[�����Ă��������B
    ���������Q��Ȃ�ꍇ�́APCM_Task �̕p�x�����Ȃ����邱�Ƃ��l�����܂��B

  �EPCM_Start �͍쐬�����n���h���ɑ΂��āA�P�񂾂����s�ł��܂��B
    �����t�@�C�������x���Đ����������́A���̓s�x�n���h���𐶐����Ă��������B

  �EPCM_SetLoadNum, PCM_SetPcmStreamNo �͍Đ��J�n����O�ɃR�[�����Ă��������B

  �EPCM_SetTrModeCd �́APCM_Task���R�[������O�ɃR�[�����Ă��������B

�@�EPCM_CreateMemHandle �Ő��������n���h���́A�K�� PCM_NotifyWriteSize �Ń����O
�@�@�o�b�t�@�ւ̃f�[�^�����ʂ�ʒm���Ă��������B

�@�EADPCM���g�p����ꍇ�A���Ȃ킿�AAudio Stack ADPCM�`�����܂��́ACD-ROM XA 
    Audio ADPCM���Đ�����ꍇ�́APCM_DeclareUseAdpcm ��ADPCM�g�p�錾�����ĉ���
    ���B

�@�ECD-ROM XA Audio ADPCM�̍Đ�������ꍇ�́A�K�� PCM_SetInfo �ōĐ�����ݒ�
    ���Ă��������B
�@�@CD-ROM XA Audio ADPCM�̍Đ��ł́A�X�g���[���Đ����[�h�ȊO�͎g�p�ł��܂���B
�@�@�T���v���v���O���� smppcm5.c ���Q�l�ɂ��Ă��������B

�T�D�T���v���v���O�����̎g�p���@
  �T���v���v���O�����̎g�p���@�́A\SATURN\SGL\DOC\SMPPCM.TXT .EUC���Q��
���Ă��������B

�U�D�ύX����
Ver.1.00 ���� Ver.1.10�ւ̕ύX�_
�@�@�@1) ���C�u�������̂�ύX���܂����B
�@�@�@�@�m�����́n�u�o�b�l�Đ����C�u�����v
�@�@�@�@�m�V���́n�u�o�b�l�E�`�c�o�b�l�Đ����C�u�����v
�@�@�@2) �`�c�o�b�l�Đ��ɑΉ����܂����B
�@�@�@3) �^�X�N�֐��̎d�l��ύX���܂����B
�@�@�@�@�m���d�l�n�S�u�u�����N�ɂP��ȏ�̕p�x�ŃR�[���B
�@�@�@�@�@�@�@�@�@�P��̃^�X�N�ŏ�������ʂ́A�ő�PCM�o�b�t�@�̔����̗�
�@�@�@�@�m�V�d�l�n�P�u�u�����N�ɂP��ȏ�̕p�x�ŃR�[���B
�@�@�@�@�@�@�@�@�@�P��̃^�X�N�ŏ�������ʂ́A�ő�4096�T���v�����̗�
    �@4) ADPCM�g�p�錾�֐� PCM_DeclareUseAdpcm ��ǉ����܂����B
      �@  �錾���Ȃ���΁AADPCM�L��ײ���؂��ݸ����Ȃ��d�g�݂ɂ��Ă���܂��B

Ver.1.10 ���� Ver.1.11�ւ̕ύX�_
�@�@�@1) �Y�t���Ă��� ADPCM�L�����C�u������ Ver1.00 ���� Ver1.01 �ɂȂ�܂����B
�@�@�@�@   Ver1.00 �ł́A�����N�G���[����������P�[�X������܂����B
      �� �o�b�l�E�`�c�o�b�l�Đ����C�u�������̂͑S���ύX���Ă��܂���B

Ver.1.11 ���� Ver.1.12�ւ̕ύX�_
      1) ���̃G���[�`�F�b�N��ǉ����܂����B
          PCM_ERR_TOO_SMALL_PCMBUF : �u�o�b�l�o�b�t�@�T�C�Y�����������v
          PCM_ERR_ILL_SIZE_PCMBUF  : �u�o�b�l�o�b�t�@�T�C�Y���s���v
      2) �Z�N�V�����Ɋւ��āA���̏C�������܂����B
�@�@�@�@1.�������f�[�^�̈�i�c�Z�N�V�����j���g�p���Ȃ��悤�ɏC�����܂����B
      3) ���̃o�O���C�����܂����B
        1.�X�g���[���V�X�e�����g���čĐ����Ă��鎞�ɁASTM_SetExecGrp ���R�[��
          ����Ƥ���̊֐�����߂�Ȃ��ꍇ������A�C�����܂����B
          �X�g���[���̏���x�C�X�g�b�N�ɗ]�T������΁A�Đ����Ɉꎞ�I�ɃX�g
          ���[���O���[�v��ύX���A���̃X�g�����[�O���[�v�̃f�[�^��ǂނ��Ƃ�
          �ł���悤�ɂȂ�܂����B

Ver.1.12 ���� Ver.1.13�ւ̕ύX�_
�@�@�@1) �^�X�N�֐��̎d�l��ύX���܂����B
         �X�g���[���Đ����[�h�ɂ����āA�ȑO�� PCM_Task ���� STM_ExecServer 
         ���R�[�����Ă��܂������ASTM_ExecServer �� �A�v���P�[�V���������R�[��
         ����悤�Ɏd�l�ύX���܂����B
�@       ���o�[�W�����Ɠ����̓�����s���ɂ́APCM_Task �̒��O�� STM_ExecServer 
         ���R�[�����ĉ������B�����̂o�b�l�n���h��������APCM_Task ��A������
         �R�[������ꍇ�ł� STM_ExecServer �͂P��̃R�[���ŏ\���ł��B
         �ꍇ�ɂ���Ă� STM_ExecServer �̑���ɁA�b�c�u���b�N����̓]������
         ���s�� STM_ExecTrans ���R�[�����邱�Ƃ��ł��܂��B
�@�@�@�@�m���d�l�n�P��̃^�X�N�ŏ�������ʂ́A�ő�4096[sample/1ch]�B
�@�@�@�@�@�@�@�@�@�X�g���[���Đ����A���C�u�������� STM_ExecServer ���R�[���B
�@�@�@�@�m�V�d�l�n�P��̃^�X�N�ŏ�������ʂ͒��߉\���̫�Ēl 1024[sample/1ch]�
�@�@�@�@�@�@�@�@�@�X�g���[���Đ����A�A�v���P�[�V�������� STM_ExecServer ���� 
�@�@�@�@�@�@�@�@�@STM_ExecTrans ���R�[���B
�@�@�@2) �P��̃^�X�N�֐�����������ʂ̒���
�@�@�@   PCM_Set1TaskSample �łP��̃^�X�N�ŏ�������ʂ̏����ݒ�ł��܂��B
  �@�@�@ ����ɂ��^�X�N�֐��̕��ׂ����肳���邱�Ƃ��ł��܂��B
�@�@�@3) �o�b�l�Đ��J�n,��~�����̐ݒ�
�@�@�@�@ PCM_SetStartTrgSize, PCM_SetStartTrgSample �ȂǂŁA�Đ��J�n������
�@�@�@�@ ���т����ݒ肷��΁A�Đ��J�n��A�f�[�^�������s����ł��Đ��̈��S����
�@�@�@�@ �����Ȃ�܂��B

Ver.1.13 ���� Ver.1.14�ւ̕ύX�_
      1) ���̃o�O���C�����܂����B
        �`�h�e�e�̃X�e���I�Đ����ɁA�u���v�ƃm�C�Y������ꍇ������A�C����
        �܂����B

Ver.1.14 ���� Ver.1.15�ւ̕ύX�_
�@�@�@1) �t�@�C���Đ����[�h�̃f�[�^�]������(CPUDMA�̏ꍇ)�̉��P
�@�@�@�@�R��������قłP�񕪂̍ő�]��������̓]�������Ă��܂����B
�@�@�@�@�Q��������قłP�񕪂̓]��������悤�ɏC�����܂����B
      2) ���[�v�Đ��@�\�̒ǉ�
        PCM_SetLoop �ŁA���[�v����񐔂��w�肵�܂��B�f�t�H���g�l�P��B
�@�@�@�@�������Đ����[�h�A�܂��́A�t�@�C���Đ����[�h�Ŏg�p���ĉ������B
�@�@�@�@�������Đ����[�h�̎g�����ɂ́A�풓�Đ��ƁA���������Đ�������܂����A
�@�@�@�@���[�v�Đ������p�ł���̂͏풓�Đ��̏ꍇ�ł��B
�@�@�@�@�X�g���[���Đ����[�h�͖��Ή��ł��B
        PCM_EntryNext �� PCM_Change �͂��̋@�\���D�悳��܂��B�܂胋�[�v
        �񐔂̎w��ɂ�����炸�A�o�^����Ă������̃n���h���ɐ؂�ւ��܂��B
�@�@�@�@�T���v���v���O���� smppcm4, smppcm13 �ɏ����Ⴊ����܂��B
      3) �T���v���v���O�����̏C��
      �@�T�E���h�h���C�o�̏����ݒ���v���O�����ōs���悤�ɏC�����܂����B

Ver.1.15 ���� Ver.1.16�ւ̕ύX�_
      1) ���̃o�O���C�����܂����B
        �t�@�C���Đ��ɂ������ǂݏ���
        �@�t�@�C���V�X�e�����g���čĐ����鎞�APCM_Start ����� PCM_Task ��
        �@�R�[������ƁA���̌�Đ����J�n���悤�Ƃ��� PCM_Start ���R�[��������
        �@�ɂf�e�r�ɃG���[�𔭐������Ă��܂��o�O������܂����B
�@�@�@�@�@�C���ɂ��A�Đ��J�n�O�� PCM_Task ���R�[�����Ă���΁A����Ƀt�@�C��
�@�@�@�@�@�̐�ǂݏ������s����悤�ɂȂ�܂����B
      2) �T�E���h�h/�e���C�u�����̎g�p
�@�@�@�@�@�������F�T�E���h�h���C�o�ւ̃R�}���h���s�͑S�āA�Ǝ��ɍs���B
�@�@�@�@�@�@�@�@�@�R�}���h�u���b�N�́A�w�肳�ꂽ����̔ԍ����g�p����B
�@�@�@�@�@�V�����F�T�E���h�h���C�o�ւ̃R�}���h���s�͑S�āA�T�E���h�h/�e���C�u��
�@�@�@�@�@�@�@�@�@�����g�p���čs���B�R�}���h�u���b�N�͓��肳��Ȃ��B
�@�@�@�@�@�T�E���h�h���C�o�̎d�l�ύX���z�������邽�߂ɁA�T�E���h�h/�e���C�u����
�@�@�@�@�@���g�p����悤�ɏC�����܂����B����� sega_snd.lib �������N����K�v��
�@�@�@�@�@����܂��B
      3) ���̊֐����폜����܂����B
�@�@�@�@�@PCM_SetPcmCmdBlockNo :�o�b�l�R�}���h�u���b�N�ԍ��̐ݒ�

Ver.1.16 ���� Ver.1.20�ւ̕ύX�_
�@    1)�s��Ή�
�@�@    ADPCM�f�[�^��VCD�X�N���v�g�t�@�C���ɋL�q���鎞�ɁARealTime�������ƍĐ�
        ���Ȃ��s������P���܂����B
�@    2)ADPCM�����̃h�L�������g�C��
�@�@    SEGA ADPCM Encoder(Macintosh�c�[��)�񋟂ɂ��A�h�L�������g�t�@�C����
        �C�����s���܂����B

/********************************* end of file *******************************/
